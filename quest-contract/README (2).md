# Quest Contract - CosmWasm Smart Contract

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∫–≤–µ—Å—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ CosmWasm (Cosmos SDK).

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞** (CreateQuest)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–≤–µ—Å—Ç
- **–°–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ
- –ö–≤–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- –ö–≤–µ—Å—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```json
{
  "create_quest": {
    "name": "–ü–æ–º–æ—â—å —Å–æ—Å–µ–¥—É",
    "description": "–ü–æ–º–æ—á—å —Å–æ—Å–µ–¥—É —Å —É–±–æ—Ä–∫–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã",
    "reward_amount": "100"
  }
}
```

### 2. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞** (CompleteQuest)
- –î—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–≤–µ—Å—Ç
- **–ü–æ–ª—É—á–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É –≤ –≤–∏–¥–µ —Ç–æ–∫–µ–Ω–æ–≤**
- –°–æ–∑–¥–∞—Ç–µ–ª—å –∫–≤–µ—Å—Ç–∞ –≤–∏–¥–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∫–≤–µ—Å—Ç
- –ö–≤–µ—Å—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π

```json
{
  "complete_quest": {
    "quest_id": "1"
  }
}
```

### 3. **–ü–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤** (Transfer)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É
- **–°–ø–∏—Å–∞–Ω–∏–µ —Å–æ —Å—á–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é**

```json
{
  "transfer": {
    "recipient": "cosmos1234567890abcdef",
    "amount": "50"
  }
}
```

### 4. **–í—ã–≤–æ–¥ –∫–æ–º–∏—Å—Å–∏–π** (AdminWithdraw)
- –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –º–æ–∂–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏
- **–°–ø–∏—Å–∞–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞**

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

### State Structures

#### Config
```rust
pub struct Config {
    pub owner: Addr,                    // –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
    pub quest_creation_fee: Uint128,    // –ö–æ–º–∏—Å—Å–∏—è –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ
    pub total_quests: u64,              // –í—Å–µ–≥–æ –∫–≤–µ—Å—Ç–æ–≤
    pub total_completed: u64,           // –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
}
```

#### Quest
```rust
pub struct Quest {
    pub id: u64,                        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    pub creator: Addr,                  // –°–æ–∑–¥–∞—Ç–µ–ª—å –∫–≤–µ—Å—Ç–∞
    pub name: String,                   // –ù–∞–∑–≤–∞–Ω–∏–µ
    pub description: String,            // –û–ø–∏—Å–∞–Ω–∏–µ
    pub reward_amount: Uint128,         // –†–∞–∑–º–µ—Ä –Ω–∞–≥—Ä–∞–¥—ã
    pub completed: bool,                // –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    pub completed_by: Option<Addr>,     // –í—ã–ø–æ–ª–Ω–∏–≤—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    pub created_at: u64,                // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    pub completed_at: Option<u64>,      // –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
}
```

#### UserBalance
```rust
pub struct UserBalance {
    pub address: Addr,                  // –ê–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    pub balance: Uint128,               // –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
    pub total_earned: Uint128,          // –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ
    pub quests_created: u64,            // –°–æ–∑–¥–∞–Ω–æ –∫–≤–µ—Å—Ç–æ–≤
    pub quests_completed: u64,          // –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∫–≤–µ—Å—Ç–æ–≤
}
```

## üì° Query Messages

### GetBalance
```json
{
  "get_balance": {
    "address": "cosmos1234567890abcdef"
  }
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "address": "cosmos1234567890abcdef",
  "balance": "950",
  "total_earned": "200"
}
```

### GetActiveQuests
```json
{
  "get_active_quests": {}
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "quests": [
    {
      "id": 1,
      "creator": "cosmos1...",
      "name": "–ü–æ–º–æ—â—å —Å–æ—Å–µ–¥—É",
      "description": "–ü–æ–º–æ—á—å —Å–æ—Å–µ–¥—É —Å —É–±–æ—Ä–∫–æ–π",
      "reward_amount": "100",
      "completed": false,
      "completed_by": null,
      "created_at": 1704067200,
      "completed_at": null
    }
  ],
  "count": 1
}
```

### GetUserStats
```json
{
  "get_user_stats": {
    "address": "cosmos1234567890abcdef"
  }
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "address": "cosmos1234567890abcdef",
  "balance": "950",
  "total_earned": "200",
  "quests_created": "2",
  "quests_completed": "3"
}
```

## üöÄ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ WASM
```bash
cargo install cosmwasm-check
cargo wasm
cosmwasm-check target/wasm32-unknown-unknown/release/quest_contract.wasm
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
```bash
cargo install cosmwasm-optimize
docker run --rm -v "$(pwd)":/code \
  --mount type=volume,source="$(basename "$(pwd)")_cache",target=/target \
  cosmwasm/rust-optimizer:0.14.0
```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Cosmos —Å–µ—Ç–∏

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
```bash
# –ò—Å–ø–æ–ª—å–∑—É—è CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∞—à–µ–π Cosmos —Å–µ—Ç–∏
chain-cli tx wasm store quest_contract.wasm \
  --from <YOUR_ADDRESS> \
  --chain-id <CHAIN_ID> \
  --gas auto
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
```bash
chain-cli tx wasm instantiate <CODE_ID> \
  '{
    "owner": "<YOUR_ADDRESS>",
    "quest_creation_fee": "5",
    "initial_balance": "1000"
  }' \
  --label "Quest System" \
  --from <YOUR_ADDRESS> \
  --chain-id <CHAIN_ID> \
  --gas auto
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–≤–µ—Å—Ç–∞

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–∑–¥–∞–Ω —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º 1000 —Ç–æ–∫–µ–Ω–æ–≤
2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞** - –ë–æ–± —Å–æ–∑–¥–∞–µ—Ç –∫–≤–µ—Å—Ç "–ü–æ–º–æ—â—å —Å —É–±–æ—Ä–∫–æ–π" –∑–∞ 100 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞–≥—Ä–∞–¥—ã
   - –ö–æ–º–∏—Å—Å–∏—è: 5 —Ç–æ–∫–µ–Ω–æ–≤
   - –ë–∞–ª–∞–Ω—Å –ë–æ–±–∞: 1000 - 5 = 995 —Ç–æ–∫–µ–Ω–æ–≤
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞** - –ê–ª–∏—Å–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–≤–µ—Å—Ç
   - –ü–æ–ª—É—á–∞–µ—Ç 100 —Ç–æ–∫–µ–Ω–æ–≤
   - –ë–∞–ª–∞–Ω—Å –ê–ª–∏—Å—ã: 1000 + 100 = 1100 —Ç–æ–∫–µ–Ω–æ–≤
4. **–ü–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤** - –ê–ª–∏—Å–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 50 —Ç–æ–∫–µ–Ω–æ–≤ –ß–∞—Ä–ª–∏
   - –ë–∞–ª–∞–Ω—Å –ê–ª–∏—Å—ã: 1100 - 50 = 1050 —Ç–æ–∫–µ–Ω–æ–≤
   - –ë–∞–ª–∞–Ω—Å –ß–∞—Ä–ª–∏: 1000 + 50 = 1050 —Ç–æ–∫–µ–Ω–æ–≤

### –ü—Ä–∏–º–µ—Ä 2: –ò—Å–ø–æ–ª—å–∑—É—è CosmJS

```typescript
import { CosmWasmClient, SigningCosmWasmClient } from "@cosmjs/cosmwasm-stargate";

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏
const client = await SigningCosmWasmClient.connectWithSigner(
  "https://rpc.network.com",
  signer
);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
const result = await client.execute(
  address,
  contractAddress,
  {
    create_quest: {
      name: "–ü–æ–º–æ—â—å —Å–æ—Å–µ–¥—É",
      description: "–ü–æ–º–æ—á—å —Å —É–±–æ—Ä–∫–æ–π",
      reward_amount: "100"
    }
  },
  "auto"
);

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
await client.execute(
  address,
  contractAddress,
  {
    complete_quest: {
      quest_id: "1"
    }
  },
  "auto"
);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
const quests = await client.queryContractSmart(contractAddress, {
  get_active_quests: {}
});
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–°–æ–∑–¥–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ–π –∫–≤–µ—Å—Ç** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥—Ä–µ—Å–∞
2. **–ù–µ–ª—å–∑—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–≤–µ—Å—Ç –¥–≤–∞–∂–¥—ã** - –∫–≤–µ—Å—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π
3. **–ù—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è** - –∫–æ–º–∏—Å—Å–∏—è —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
4. **–¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞** - –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üìù –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

```
–°–û–ó–î–ê–ù–ò–ï –ö–í–ï–°–¢–ê:
–ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –∫–æ–º–∏—Å—Å–∏—è –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ = –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
–ü—Ä–∏–º–µ—Ä: 1000 - 5 = 995

–í–´–ü–û–õ–ù–ï–ù–ò–ï –ö–í–ï–°–¢–ê:
–ë–∞–ª–∞–Ω—Å –≤—ã–ø–æ–ª–Ω–∏–≤—à–µ–≥–æ + —Ä–∞–∑–º–µ—Ä –Ω–∞–≥—Ä–∞–¥—ã = –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
–ü—Ä–∏–º–µ—Ä: 1000 + 100 = 1100

–ü–ï–†–ï–î–ê–ß–ê:
–ë–∞–ª–∞–Ω—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è - —Å—É–º–º–∞ = –±–∞–ª–∞–Ω—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
–ë–∞–ª–∞–Ω—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è + —Å—É–º–º–∞ = –±–∞–ª–∞–Ω—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
–ü—Ä–∏–º–µ—Ä: 1000 - 50 = 950 (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å), 1000 + 50 = 1050 (–ø–æ–ª—É—á–∞—Ç–µ–ª—å)

–í–´–í–û–î (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü):
–ë–∞–ª–∞–Ω—Å –≤–ª–∞–¥–µ–ª—å—Ü–∞ - —Å—É–º–º–∞ = –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
–ü—Ä–∏–º–µ—Ä: 500 - 100 = 400
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
# Query
{
  "get_balance": {
    "address": "cosmos1234567890abcdef"
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
{
  "get_user_stats": {
    "address": "cosmos1234567890abcdef"
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
```bash
{
  "get_config": {}
}
```

## üìå –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–º–æ—â–∏:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è CosmWasm: https://docs.cosmwasm.com
- Cosmos SDK: https://docs.cosmos.network
- GitHub Issues: [–°–æ–∑–¥–∞—Ç—å issue]
